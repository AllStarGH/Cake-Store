<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>增加新蛋糕</title>
    <script src="../javascriptapi/jquery-1.9.1.min.js" type="text/javascript"></script>
</head>
<body>
<div style="text-align: center">
    <h4>请输入新蛋糕各项设定</h4>
    <br><br>
    <form id="comm-form">
        <label>名称：</label>
        <input type="text" name="cakename" id="newCake_name" placeholder="设置名称" class="consul_attr">
        <br>
        <label>类型：</label>
        <input type="text" name="caketype" id="newCake_type" placeholder="设置类型" class="consul_attr">
        <br>
        <label>价格：</label>
        <input type="text" name="price" id="newCake_price" placeholder="设置价格" class="consul_attr">
        <br>
        <label>供应商：</label>
        <input type="text" name="supplier" id="newCake_supp" placeholder="输入产家" class="consul_attr">
        <br>
        <label>存数：</label>
        <input type="text" name="amount" id="newCake_amount" placeholder="请输入数量" class="consul_attr">
        <br>
        <br>
        <input id="btn_commit" type="button" value="提交">
    </form>
    <br>
    <button id="reset-attr" type="reset" onclick="resetting()">重置</button>
    <br>
    <br>
    <a href="operation.html">返回商城管理页</a>
</div>
</body>

<script type="text/javascript">
    $("#btn_commit").click(function () {
        var url = "/consuls/add_new/";
        var serialize = $('#comm-form').serialize();
        $.ajax({
            "url": url,
            "type": "POST",
            "data": serialize,
            "dataType": "json",
            "success": function (json) {
                if (json.state == 200) {
                    alert("添加成功!");
                    location.href = 'operation.html';
                } else {
                    alert(json.message);
                }
            }
        });
    });

    function resetting() {
        var c = confirm('确认重置?');
        if (c == true) {
            $('.consul_attr').val('');
        }
    }
</script>
</html>